!function(e){function t(t){for(var a,r,o=t[0],c=t[1],p=t[2],d=0,h=[];d<o.length;d++)r=o[d],s[r]&&h.push(s[r][0]),s[r]=0;for(a in c)Object.prototype.hasOwnProperty.call(c,a)&&(e[a]=c[a]);for(l&&l(t);h.length;)h.shift()();return n.push.apply(n,p||[]),i()}function i(){for(var e,t=0;t<n.length;t++){for(var i=n[t],a=!0,o=1;o<i.length;o++){var c=i[o];0!==s[c]&&(a=!1)}a&&(n.splice(t--,1),e=r(r.s=i[0]))}return e}var a={},s={0:0},n=[];function r(t){if(a[t])return a[t].exports;var i=a[t]={i:t,l:!1,exports:{}};return e[t].call(i.exports,i,i.exports,r),i.l=!0,i.exports}r.m=e,r.c=a,r.d=function(e,t,i){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(r.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)r.d(i,a,function(t){return e[t]}.bind(null,a));return i},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="";var o=window.webpackJsonp=window.webpackJsonp||[],c=o.push.bind(o);o.push=t,o=o.slice();for(var p=0;p<o.length;p++)t(o[p]);var l=c;n.push([669,1]),i()}({108:function(e,t,i){},109:function(e,t,i){},110:function(e,t,i){},111:function(e,t,i){},293:function(e,t,i){"use strict";var a=i(108);i.n(a).a},296:function(e,t){},298:function(e,t){},324:function(e,t){},327:function(e,t){},559:function(e,t){},622:function(e,t,i){"use strict";var a=i(109);i.n(a).a},623:function(e,t,i){"use strict";var a=i(110);i.n(a).a},625:function(e,t,i){},626:function(e,t,i){},668:function(e,t,i){"use strict";var a=i(111);i.n(a).a},669:function(e,t,i){"use strict";i.r(t);var a=i(6),s=i(35),n=i(287),r=i(288),o=i.n(r),c=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{attrs:{id:"app"}},[i("nav",{staticClass:"navbar",attrs:{role:"navigation","aria-label":"main navigation"}},[i("div",{staticClass:"navbar-brand"},[i("router-link",{staticClass:"navbar-item hover-underline-child",attrs:{to:"/"}},[i("img",{attrs:{src:"assets/images/logo-48.png",alt:"M"}}),e._v(" "),i("span",{staticClass:"title is-5",staticStyle:{position:"relative"}},[e._v("Mercurius")])]),e._v(" "),i("a",{staticClass:"navbar-burger",class:{"is-active":e.showMenu},attrs:{role:"button","aria-label":"menu","aria-expanded":"false"},on:{click:function(t){e.showMenu=!e.showMenu}}},[i("span",{attrs:{"aria-hidden":"true"}}),e._v(" "),i("span",{attrs:{"aria-hidden":"true"}}),e._v(" "),i("span",{attrs:{"aria-hidden":"true"}})])],1),e._v(" "),i("div",{staticClass:"navbar-menu",class:{"is-active":e.showMenu}},[e._m(0),e._v(" "),i("div",{staticClass:"navbar-end"},[i("a",{staticClass:"navbar-item is-hidden-desktop profile-container",staticStyle:{"border-bottom":"2px solid rgba(0,0,0,0.05)"}},[e.avatar?i("figure",[i("img",{attrs:{src:e.avatar}})]):i("div",[i("span",[e._v(e._s((e.name||"?")[0]))])]),e._v(" "),i("div",[i("span",[e._v(e._s(e.name))]),e._v(" "),i("span",[e._v("ID-"+e._s(e.userdata.address))]),e._v(" "),i("span",[e._v(e._s(e.hub))])])]),e._v(" "),i("b-dropdown",{staticClass:"is-hidden-touch",attrs:{id:"settings-dropdown",position:"is-bottom-left"}},[i("a",{staticClass:"navbar-item profile-container is-hidden-touch",attrs:{slot:"trigger",title:"Profile"},slot:"trigger"},[e.avatar?i("figure",[i("img",{attrs:{src:e.avatar}})]):i("div",[i("span",[e._v(e._s((e.name||"?")[0]))])])]),e._v(" "),i("b-dropdown-item",{staticClass:"profile-container"},[e.avatar?i("figure",[i("img",{attrs:{src:e.avatar}})]):i("div",[i("span",[e._v(e._s((e.name||"?")[0]))])]),e._v(" "),i("div",[i("span",[e._v(e._s(e.name))]),e._v(" "),i("span",[e._v("ID-"+e._s(e.userdata.address))]),e._v(" "),i("span",[e._v(e._s(e.hub))])])]),e._v(" "),i("b-dropdown-item",{on:{click:function(t){return e.logout()}}},[e._v("Logout")])],1),e._v(" "),i("a",{staticClass:"navbar-item flex-item is-hidden-desktop is-danger",attrs:{title:"Logout"},on:{click:function(t){return e.logout()}}},[i("b-icon",{attrs:{icon:"logout-variant"}}),e._v(" "),i("span",{staticStyle:{"font-weight":"600"}},[e._v("Â Logout")])],1)],1)])]),e._v(" "),i("div",{attrs:{id:"body"}},[i("transition",{attrs:{name:"fade"}},[i("router-view")],1)],1),e._v(" "),i("div",{attrs:{id:"footer"}})])};c._withStripped=!0;var p=a.default.extend({data:()=>({showMenu:!1}),computed:{...Object(s.b)({loggedIn:"isLoggedIn",activeGaia:"activeGaiaStore"}),userdata(){return this.loggedIn?this.$store.state.userdata:null},name(){return this.getProfileName(this.userdata,!0)},avatar(){return this.userdata&&this.userdata.profile&&this.userdata.profile.image&&this.userdata.profile.image[0]?this.userdata.profile.image[0].contentUrl:""},hub(){return this.activeGaia?this.activeGaia.server:"{null}"}},methods:{getProfileName:(e,t)=>e?e.username?e.username:e.profile&&e.profile.name?e.profile.name:t?void 0:`ID-${e.address}`:"{null}",logout(){this.showMenu=!1,this.$store.commit("logout")}}}),l=(i(293),i(47)),d=Object(l.a)(p,c,[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"navbar-start",staticStyle:{"flex-grow":"1"}},[t("div",{staticClass:"navbar-item",staticStyle:{"flex-grow":"1","justify-content":"center"}})])}],!1,null,null,null);d.options.__file="src/app/app.vue";var h=d.exports,u=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{attrs:{id:"mercurius-login"}},[i("div",{staticClass:"container",attrs:{id:"login"}},[i("form",[i("b-field",{attrs:{label:"Mnemonic (Keychain Phrase)",type:e.getType(e.fields.mnemonic),message:e.fields.mnemonic&&e.fields.mnemonic.invalid?"Mnemonic: Must be 12 lowercase words":""}},[i("b-input",{directives:[{name:"validate",rawName:"v-validate",value:{required:!0,regex:/^\s*(?:[a-z]+\s){11}[a-z]+\s*$/},expression:"{ required: true, regex: /^\\s*(?:[a-z]+\\s){11}[a-z]+\\s*$/ }"}],attrs:{name:"mnemonic",placeholder:"apple banana orange cherry mango kiwi grape watermelon strawberry lemon keyboard cat",type:"textarea"},model:{value:e.mnemonic,callback:function(t){e.mnemonic="string"==typeof t?t.trim():t},expression:"mnemonic"}})],1)],1),e._v(" "),i("span",{directives:[{name:"show",rawName:"v-show",value:e.error,expression:"error"}],staticClass:"error has-text-danger"},[e._v(e._s(e.error))]),e._v(" "),i("button",{staticClass:"button is-primary slim",attrs:{disabled:e.errors.any()||!this.mnemonic},on:{click:function(t){return e.login()}}},[e._v("Login")])])])};u._withStripped=!0;var g=i(61),m=i(19),v=i(28),y=a.default.component("mercurius-login",{props:{done:{required:!1,type:Boolean}},data:()=>({error:"",mnemonic:""}),computed:{...Object(s.b)({loggedIn:"isLoggedIn"})},mounted(){this.loggedIn?this.$emit("update:done",!0):this.$emit("update:done",!1)},watch:{loggedIn(e){e||this.$emit("update:done",!1)}},methods:{getType:(e,t)=>e&&(e.dirty||!t&&e.touched)?e.valid?"is-success":"is-danger":"",async initialize(){console.log("Initializing..."),console.log("Initialized!")},login(){if(console.log("Logging in!"),this.$emit("working",!0),!Object(g.validateMnemonic)(this.mnemonic))return console.error(this.error="Invalid keychain phrase entered!"),this.$emit("error",this.error),void this.$emit("working",!1);Object(g.mnemonicToSeed)(this.mnemonic).then(e=>this.$store.commit("login",m.bip32.fromSeed(e))).then(async()=>this.$store.commit("addGaia",await Object(v.connectToGaiaHub)("https://hub.blockstack.org",this.$store.getters.masterKeychain.getIdentityOwnerAddressNode(0).privateKey.toString("hex")))).then(()=>this.finish()).catch(e=>{console.error("Error logging in:",e),this.$emit("error",this.error),this.$emit("working",!1)})},finish(){this.$emit("update:done",!0),this.$emit("working",!1)}}}),f=(i(622),Object(l.a)(y,u,[],!1,null,null,null));f.options.__file="src/components/mercurius-login/mercurius-login.vue";var w=f.exports,b=function(){var e=this.$createElement;return(this._self._c||e)("div",{attrs:{id:"mercurius-loading"}})};b._withStripped=!0;var k=a.default.component("mercurius-loading",{data:()=>({}),mounted(){},methods:{}}),_=(i(623),Object(l.a)(k,b,[],!1,null,null,null));_.options.__file="src/components/mercurius-loading/mercurius-loading.vue";var x=_.exports;var P=i(291),S=i(14);var C=i(62);class I{constructor(e){this._node=e instanceof I?e.node:e,this._node.privateKey?this._keyPair=m.ECPair.fromPrivateKey(this._node.privateKey):this._node.publicKey?this._keyPair=m.ECPair.fromPublicKey(this._node.publicKey):this._keyPair=null}static fromBase58(e,t){return new I(C.fromBase58(e,t))}static fromPrivateKey(e,t,i){return new I(C.fromPrivateKey(e,t,i))}static fromPublicKey(e,t,i){return new I(C.fromPublicKey(e,t,i))}static fromSeed(e,t){return new I(C.fromSeed(e,t))}get node(){return this._node}get keyPair(){return this._keyPair}getAddress(){return e=this._node,m.payments.p2pkh({pubkey:e.publicKey}).address;var e}get chainCode(){return this._node.chainCode}get depth(){return this._node.depth}get index(){return this._node.index}get network(){return this._node.network}get parentFingerprint(){return this._node.parentFingerprint}get identifier(){return this._node.identifier}get fingerprint(){return this._node.fingerprint}get privateKey(){return this._node.privateKey}get publicKey(){return this._node.publicKey}isNeutered(){return this._node.isNeutered()}neutered(){return new I(this._node.neutered())}toBase58(){return this._node.toBase58()}toWIF(){return this._node.toWIF()}derive(e){return new I(this._node.derive(e))}deriveHardened(e){return new I(this._node.deriveHardened(e))}derivePath(e){return new I(this._node.derivePath(e))}sign(e){return this._node.sign(e)}verify(e,t){return this._node.verify(e,t)}}function L(e){let t=0;if(0===e.length)return t;for(let i=0;i<e.length;i++){t=(t<<5)-t+e.charCodeAt(i),t&=t}return 2147483647&t}class K extends I{constructor(e,t){super(e),this._appDomain=t}static fromAppsNode(e,t,i){const a=L(Object(S.createHash)("sha256").update(`${i}${t}`).digest("hex"));return new K(e.deriveHardened(a),i)}get appDomain(){return this._appDomain}get appPrivateKey(){return this.keyPair.privateKey.toString("hex")}get address(){return m.payments.p2pkh({pubkey:this.publicKey}).address}}class N extends I{constructor(e,t){super(e),this._salt=t}get salt(){return this._salt}getAppNode(e){const t=L(Object(S.createHash)("sha256").update(`${e}${this.salt}`).digest("hex"));return new K(this.node.deriveHardened(t),e)}}const A=0,O=1,B=2;class $ extends I{constructor(e,t){super(e),this._salt=t,this._appsNode=new N(this.node.deriveHardened(A),this.salt)}get salt(){return this._salt}getIdentityKey(){return this.keyPair.privateKey.toString("hex")}getIdentityKeyId(){return this.keyPair.publicKey.toString("hex")}get appsNode(){return this._appsNode}getEncryptionNode(){return this.node.deriveHardened(B)}getSigningNode(){return this.node.deriveHardened(O)}get derivedIdentityKeyPair(){return{key:this.getIdentityKey(),keyId:this.getIdentityKeyId(),address:this.getAddress(),appsNodeKey:this.appsNode.toBase58(),salt:this.appsNode.salt}}}const D=888,j=0,G=44,E=0,M=0;var R=class{constructor(e){this.node=e instanceof I?e:new I(e),this._identityPrivateKeychain=this.node.deriveHardened(D).deriveHardened(j),this._identityPublicKeychain=this._identityPrivateKeychain.neutered(),this._bitcoinPrivateKeychain=this.node.deriveHardened(G).deriveHardened(E).deriveHardened(M),this._bitcoinPublicKeychain=this._bitcoinPrivateKeychain.neutered()}get masterKeychain(){return this.node}get identityPrivateKeychain(){return this._identityPrivateKeychain}get identityPublicKeychain(){return this._identityPublicKeychain}get identityKeychain(){return{private:this.identityPrivateKeychain,public:this.identityPublicKeychain}}get bitcoinPrivateKeychain(){return this._bitcoinPrivateKeychain}get bitcoinPublicKeychain(){return this._bitcoinPublicKeychain}get bitcoinKeychain(){return{private:this.bitcoinPrivateKeychain,public:this.bitcoinPublicKeychain}}getIdentityOwnerAddressNode(e){e=e||0;const t=this.identityPrivateKeychain.keyPair.publicKey.toString("hex"),i=Object(S.createHash)("sha256").update(t).digest("hex");return new $(this.identityPrivateKeychain.deriveHardened(e),i)}getBitcoinAddressNode(e,t){const i="CHANGE"===(t=Object.assign({},{address:"EXTERNAL",keychain:"PRIVATE"},t)).address?1:0;return("PUBLIC"===t.keychain?this._bitcoinPublicKeychain:this._bitcoinPrivateKeychain).derive(i).derive(e)}getFirstBitcoinAddress(){return this.bitcoinPublicKeychain.derive(0).derive(0)}};const T={state:{bigListCache:[],appCache:[],gaiaStores:[],activeGaiaStore:0,_masterKeychain:"",identityIndex:0,userdata:null,storeBDay:Date.now()},getters:{masterKeychain:e=>new R(m.bip32.fromBase58(e._masterKeychain)),isLoggedIn:e=>e._masterKeychain&&e.gaiaStores.length,storeAge:e=>Date.now()-e.storeBDay,activeGaiaStore:e=>e.gaiaStores[e.activeGaiaStore],identity:(e,t)=>t.masterKeychain.getIdentityOwnerAddressNode(0)},mutations:{login(e,t){e._masterKeychain=t.toBase58();const i=new R(t);e.userdata={username:null,profile:null,address:i.getIdentityOwnerAddressNode(0).getAddress()},e.activeGaiaStore=0,e.identityIndex=0},logout(e){e._masterKeychain=null,e.gaiaStores.splice(0),e.activeGaiaStore=0,e.bigListCache=[]},setBigListCache(e,t){e.bigListCache=[...t]},setAppCache(e,t){e.appCache=[...t]},addGaia(e,t){e.gaiaStores.push(t)},removeGaia(e,t){0!==t&&(e.gaiaStores=e.gaiaStores.slice(0,t).concat(e.gaiaStores.slice(t+1)),e.activeGaiaStore===t?e.activeGaiaStore=0:e.gaiaStores[e.activeGaiaStore]||(e.activeGaiaStore=0))},setActiveGaia(e,t){e.gaiaStores[t]&&(e.activeGaiaStore=t)}},actions:{updateIdentity(e,t){},login(e,t){}},plugins:[Object(P.a)()]};i(624),i(625),i(626);var q=i(160),F=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{attrs:{id:"mercurius-home"}},[i("div",{attrs:{id:"header"}},[i("div",{attrs:{id:"path"}},[i("button",{staticClass:"button is-small is-white folder",staticStyle:{"margin-right":"0.5rem"},attrs:{disabled:e.splitDir.length<=1},on:{click:function(t){return e.goto(e.splitDir.length-2)}}},[i("b-icon",{attrs:{icon:"folder-upload"}})],1),e._v(" "),e._l(e.splitDir,function(t,a){return[i("a",{key:"a-"+a,staticClass:"tag",attrs:{title:t},on:{click:function(t){return e.goto(a)}}},[e._v(e._s(e.annotations[t]||t))]),e._v(" "),a+1<e.splitDir.length?i("span",{key:"s-"+a},[i("b-icon",{attrs:{icon:"chevron-right"}})],1):e._e()]})],2),e._v(" "),i("div",{attrs:{id:"buttons"}},[i("button",{staticClass:"button is-small is-white",on:{click:function(t){return e.refresh()}}},[i("b-icon",{attrs:{icon:"refresh"}})],1),e._v(" "),i("button",{staticClass:"button is-small is-white",attrs:{disabled:!e.anyActive},on:{click:function(t){return e.download()}}},[i("b-icon",{attrs:{icon:"download"}})],1)])]),e._v(" "),i("div",{ref:"explorer",attrs:{id:"explorer"}},[i("div",{attrs:{id:"background"},on:{mousedown:function(t){return e.drawStart(t)}}},[0===e.folders.length&&0===e.files.length?i("h5",{staticClass:"subtitle is-5"},[e._v("Nothing here...")]):e._e()]),e._v(" "),e._l(e.folders,function(t){return i("a",{key:"/"+t,staticClass:"folder",class:{active:e.active["/"+t],"last-active":e.lastActive==="/"+t},attrs:{id:"m-/"+t},on:{click:function(i){return e.onClick(i,"/"+t)}}},[i("b-icon",{attrs:{icon:"folder"}}),e._v(" "),i("span",[e._v(e._s(t))]),e._v(" "),e.annotations[t]?i("b-tag",{staticStyle:{"margin-left":"0.5rem"}},[e._v(e._s(e.annotations[t]))]):e._e()],1)}),e._v(" "),e._l(e.files,function(t){return i("a",{key:t,staticClass:"file",class:{active:e.active[t],"last-active":e.lastActive===t},attrs:{id:"m-"+t},on:{click:function(i){return e.onClick(i,t)}}},[i("b-icon",{staticStyle:{color:"#BDBDBD"},attrs:{icon:"file"}}),e._v(" "),i("span",[e._v(e._s(t))])],1)}),e._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:e.drawing,expression:"drawing"}],style:e.drawPos,attrs:{id:"selectbox"}})],2),e._v(" "),e.working||e.workingOn?i("div",{attrs:{id:"loader"}},[i("span",[e._v(e._s(e.workingOn)+"...")]),e._v(" "),i("div",{attrs:{id:"mercurius-loading-small"}}),e._v(" "),i("div",{staticClass:"has-background-primary",style:{width:(100*e.progress).toFixed(2)+"%"},attrs:{id:"progress"}})]):e._e()])};F._withStripped=!0;var H=i(63),z=i.n(H),W=i(289),U=i.n(W),J=i(158),V=i(24);function X(e,t,i,a){const s={gaiaChallenge:e.challenge_text,hubUrl:i,iss:Object(v.getPublicKeyFromPrivate)(t),salt:Object(S.randomBytes)(16).toString("hex"),associationToken:a};return`v1:${new V.TokenSigner("ES256K",t).sign(s)}`}var Z=i(290),Y=i.n(Z),Q=i(159),ee=i.n(Q);var te={version:20171018,apps:[{name:"Dappy Wallet",displayName:"Dappy Wallet",description:"Multicurrency light wallet with decentralized storage.",version:"1.0.0",appIcon:{small:"app-icon-dappy-wallet-256x256.png",large:"app-icon-dappy-wallet-512x512.png"},website:"https://dappywallet.com/",launchLink:"https://app.dappywallet.com/",developer:"BC Net",status:"user_ready_wallet"},{name:"Dirua",displayName:"Dirua",description:"A universal crypto wallet.",version:"1.0.0",appIcon:{small:"app-icon-dirua-256x256.png",large:"app-icon-dirua-512x512.png"},website:"https://dirua.exchange",launchLink:"https://dirua.exchange",developer:"Citrusbyte",status:"user_ready_wallet"},{name:"Arctus",displayName:"Arctus",description:"Decentralized multicurrency wallet.",version:"1.0.0",appIcon:{small:"app-icon-arctus-256x256.png",large:"app-icon-arctus-512x512.png"},website:"https://arctus.io",launchLink:"https://wallet.arctus.io",developer:"Arctus",status:"user_ready_wallet"},{name:"Todo App",displayName:"To Do List",description:"A simple todo app build on blockstack.",version:"1.0.0",appIcon:{small:"app-icon-todo-list-256x256.png",large:"app-icon-todo-list-1024x1024.png"},website:"http://blockstack-todos.appartisan.com",launchLink:"http://blockstack-todos.appartisan.com",developer:"Larry Salibra",storageRequired:!0,status:"user_ready"},{name:"Diffuse",displayName:"Diffuse",description:"A music player which connects to your cloud/distributed storage.",version:"1.0.0",appIcon:{small:"app-icon-diffuse-256x256.png",large:"app-icon-diffuse-512x512.png"},website:"https://www.diffuse.sh",launchLink:"https://www.diffuse.sh",developer:"Steven Vandevelde",storageRequired:!0,status:"in_progress"},{name:"Hello, Blockstack",displayName:"Hello, Blockstack",description:"A simple demo of Blockstack Auth",version:"1.0.0",appIcon:{small:"app-icon-hello-blockstack-256x256.png",large:"app-icon-hello-blockstack-1024x1024.png"},website:"https://www.helloblockstack.com",launchLink:"https://www.helloblockstack.com",developer:"Blockstack PBC",status:"user_ready"},{name:"Blockstack Forum",displayName:"Forum",description:"Blockstack Forum",version:"1.0.0",appIcon:{small:"app-icon-forum-256x256.png",large:"app-icon-forum-1024x1024.png"},website:"https://forum.blockstack.org",launchLink:"https://forum.blockstack.org",developer:"Blockstack PBC",status:"user_ready"},{name:"Casa",displayName:"Casa",description:"Open source home sharing protocol.",version:"1.0.0",appIcon:{small:"app-icon-casa-256x256.png",large:"app-icon-casa-1024x1024.png"},website:"https://casa.cash",launchLink:"https://casa.cash",developer:"Bedkin, Inc.",status:"in_progress"},{name:"Beacon",displayName:"Beacon",description:"Decentralized, transparent, secure voting.",version:"1.0.0",appIcon:{small:"app-icon-beacon-256x256.png",large:"app-icon-beacon-1024x1024.png"},website:"https://ntzwrk.org/projects/beacon/",launchLink:"https://ntzwrk.org/projects/beacon/",developer:"ntzwrk",status:"in_progress"},{name:"DotPodcast",displayName:"DotPodcast",description:"A software lab for podcasts and blockchains.",version:"1.0.0",appIcon:{small:"app-icon-dotpodcast-256x256.png",large:"app-icon-dotpodcast-1024x1024.png"},website:"http://player.dotpodcast.co",launchLink:"http://player.dotpodcast.co",developer:"DotPodcast",status:"user_ready"},{name:"Postly",displayName:"Postly",description:"The best way to share and discover content with friends.",version:"1.0.0",appIcon:{small:"app-icon-postly-256x256.png",large:"app-icon-postly-512x512.png"},website:"https://www.postly.co/blockstack",launchLink:"https://www.postly.co/blockstack",developer:"Postly",status:"in_progress"},{name:"Symmitree",displayName:"Symmitree",description:"Providing free connectivity to the displaced and deprived.",version:"1.0.0",appIcon:{small:"app-icon-symmitree-256x256.png",large:"app-icon-symmitree-512x512.png"},website:"http://symmitree.com",launchLink:"http://symmitree.com",developer:"Symmitree",status:"in_progress"},{name:"Eder",displayName:"Eder",description:"A decentralized stash for your personal data.",version:"1.0.0",appIcon:{small:"app-icon-eder-256x256.png",large:"app-icon-eder-512x512.png"},website:"http://eder.io",launchLink:"http://eder.io",developer:"Eder",status:"in_progress"},{name:"Souq",displayName:"Souq",description:"Project Management Platform.",version:"1.0.0",appIcon:{small:"app-icon-souq-256x256.png",large:"app-icon-souq-512x512.png"},website:"http://beta.cryptocracy.io",launchLink:"http://beta.cryptocracy.io",developer:"Souq",status:"in_progress"},{name:"Coins",displayName:"Coins",description:"Beautiful, decentralized portfolio & coin tracking.",version:"1.0.0",appIcon:{small:"app-icon-coins-256x256.png",large:"app-icon-coins-512x512.png"},website:"https://coinsapp.co",launchLink:"https://use.coinsapp.co",developer:"Thomas Osmonson",status:"user_ready_token",storageRequired:!0},{name:"Coinfort",displayName:"Coinfort",description:"",version:"1.0.0",appIcon:{small:"app-icon-coinfort-256x256.png",large:"app-icon-coinfort-512x512.png"},website:"http://www.coinfort.io",launchLink:"http://www.coinfort.io",developer:"Satraj Bambra",status:"user_ready_token",storageRequired:!0},{name:"CoinStack",displayName:"CoinStack",description:"",version:"1.0.0",appIcon:{small:"app-icon-coinstack-256x256.png",large:"app-icon-coinstack-512x512.png"},website:"http://www.coinstack.one/",launchLink:"http://www.coinstack.one/",developer:"Ben Rogmans",status:"user_ready_token",storageRequired:!0},{name:"CoinKitty",displayName:"CoinKitty",description:"",version:"1.0.0",appIcon:{small:"app-icon-coinkitty-256x256.png",large:"app-icon-coinkitty-512x512.png"},website:"http://www.coinkitty.co/",launchLink:"http://www.coinkitty.co/",developer:"Vince DePalma",status:"user_ready_token",storageRequired:!0},{name:"faa.st",displayName:"faa.st",description:"",version:"1.0.0",appIcon:{small:"app-icon-faast-256x256.png",large:"app-icon-faast-512x512.png"},website:"http://faa.st/portfolio",launchLink:"http://faa.st/portfolio",developer:"Moe Adham",status:"user_ready_token",storageRequired:!0},{name:"Coinremix",displayName:"Coinremix",description:"",version:"1.0.0",appIcon:{small:"app-icon-coinremix-256x256.png",large:"app-icon-coinremix-512x512.png"},website:"http://coinremix.netlify.com/",launchLink:"http://coinremix.netlify.com/",developer:"Ben Longstaff",status:"user_ready_token",storageRequired:!0},{name:"BlockPortfolio",displayName:"BlockPortfolio",description:"",version:"1.0.0",appIcon:{small:"app-icon-blockportfolio-256x256.png",large:"app-icon-blockportfolio-512x512.png"},website:"http://www.blockportfol.io/",launchLink:"http://www.blockportfol.io/",developer:"Patrick DeVivo",status:"user_ready_token",storageRequired:!0},{name:"Coindex",displayName:"Coindex",description:"",version:"1.0.0",appIcon:{small:"app-icon-coindex-256x256.png",large:"app-icon-coindex-512x512.png"},website:"http://coindexapp.herokuapp.com",launchLink:"http://coindexapp.herokuapp.com",developer:"Daniel Shijia Wang",status:"user_ready_token",storageRequired:!0},{name:"Lio",displayName:"Lio",description:"",version:"1.0.0",appIcon:{small:"app-icon-lio-256x256.png",large:"app-icon-lio-512x512.png"},website:"http://lioapp.io",launchLink:"http://lioapp.io",developer:"Alec Richter",status:"user_ready_token",storageRequired:!0},{name:"Peachy Portfolio",displayName:"Peachy Portfolio",description:"",version:"1.0.0",appIcon:{small:"app-icon-peachy-256x256.png",large:"app-icon-peachy-512x512.png"},website:"http://peachyportfolio.com/",launchLink:"http://peachyportfolio.com/",developer:"Brandon Paree",status:"user_ready_token",storageRequired:!0},{name:"Graphite",displayName:"Graphite",description:"Graphite allows you to write without giving up your privacy.",version:"1.0.0",appIcon:{small:"app-icon-graphite-256x256.png",large:"app-icon-graphite-512x512.png"},website:"http://graphitedocs.com",launchLink:"http://graphitedocs.com",developer:"Justin Hunter",status:"user_ready",storageRequired:!0},{name:"Misthos",displayName:"Misthos",description:"Participation based governance and financial management of ventures",version:"1.0.0",appIcon:{small:"app-icon-misthos-256x256.png",large:"app-icon-misthos-512x512.png"},website:"https://www.misthos.io",launchLink:"https://www.misthos.io",developer:"Justin Carter",status:"user_ready",storageRequired:!0},{name:"Stealthy",displayName:"Stealthy",description:"",version:"1.0.0",appIcon:{small:"app-icon-stealthy-256x256.png",large:"app-icon-stealthy-512x512.png"},website:"https://www.stealthy.im/",launchLink:"https://www.stealthy.im/",developer:"Prabhaav Bhardwaj",status:"user_ready",storageRequired:!0},{name:"Hermes",displayName:"Hermes",description:"",version:"1.0.0",appIcon:{small:"app-icon-hermes-256x256.png",large:"app-icon-hermes-512x512.png"},website:"https://www.hihermes.co/index.html",launchLink:"https://www.hihermes.co/index.html",developer:"Dan Healy",status:"user_ready_chat",storageRequired:!0},{name:"PeerChat",displayName:"PeerChat",description:"",version:"1.0.0",appIcon:{small:"app-icon-peerchat-256x256.png",large:"app-icon-peerchat-512x512.png"},website:"https://chat.postly.co/",launchLink:"https://chat.postly.co/",developer:"Postly",status:"user_ready_chat",storageRequired:!0},{name:"Travelstack",displayName:"Travelstack",description:"Decentralized photo diary and social network for travelers.",version:"1.0.0",appIcon:{small:"app-icon-travelstack-256x256.png",large:"app-icon-travelstack-512x512.png"},website:"http://www.travelstack.club",launchLink:"http://app.travelstack.club",developer:"Tiago Alves",storageRequired:!0,status:"user_ready"},{name:"NoteRiot",displayName:"NoteRiot",description:"Simple, flexible note taking.",version:"1.0.0",appIcon:{small:"app-icon-noteriot-256x256.png",large:"app-icon-noteriot-512x512.png"},website:"https://note.riot.ai",launchLink:"https://note.riot.ai",developer:"Dan Trevino",status:"in_progress"},{name:"Afari",displayName:"Afari",description:"Decentralized social media app",version:"1.0.0",appIcon:{small:"app-icon-afari-256x256.png",large:"app-icon-afari-512x512.png"},website:"https://afari.io",launchLink:"https://app.afari.io",developer:"Afari Inc.",storageRequired:!0,status:"user_ready"},{name:"SpringRole",displayName:"SpringRole",description:"Your Professional Profile on the blockchain",version:"0.9",appIcon:{small:"app-icon-springrole-256x256.png",large:"app-icon-springrole-512x512.png"},website:"https://springrole.com",launchLink:"https://beta.springrole.com",developer:"SpringRole Inc.",storageRequired:!0,status:"user_ready"}]};const ie=["iv","ephemeralPK","cipherText","mac","wasString"],ae=[{name:"Graphite (App)**",website:"https://app.graphitedocs.com"},{name:"XOR Drive**",website:"https://xordrive.io"}];var se=a.default.component("mercurius-home",{data:()=>({working:!1,progress:0,workingOn:"",dir:"",bigList:[],folders:[],files:[],lastActive:"",lastActiveTime:0,active:{},anyActive:!1,drawing:!1,drawBegin:{x:0,y:0},drawPoints:{x1:0,y1:0,x2:0,y2:0},drawPos:{top:"0px",left:"0px",height:"0px",width:"0px"},contentType:{},annotations:{},apps:[]}),computed:{...Object(s.b)({activeGaia:"activeGaiaStore",masterKeychain:"masterKeychain"}),splitDir(){const e=[];let t="";return this.dir.split("/").forEach(i=>{i?t?e.push(t+i):e.push(i):t+="/"}),[this.activeGaia.server.replace(/https?:\/\//,""),...e]}},watch:{activeGaia(){this.refresh()},bigList(){this.populate().catch(e=>this.handleError(e))},dir(){this.active={},this.lastActive="",this.lastActiveTime=0,this.populate().catch(e=>this.handleError(e)),this.$route.path!=="/"+this.dir&&this.$router.replace({path:"/"+this.dir})},$route(){this.$route.path!=="/"+this.dir&&this.bigList.find(e=>e.startsWith(this.$route.path.slice(1)))&&(this.dir=this.$route.path.slice(1))},active(){this.anyActive=this.active&&Object.values(this.active).reduce((e,t)=>e||t,!1)}},mounted(){if(window.addEventListener("mouseup",this.drawEnd),window.addEventListener("mousemove",this.drawContinue),this.$store.state.bigListCache&&this.$store.state.bigListCache.length){if(this.bigList=this.$store.state.bigListCache,this.$store.state.appCache&&this.$store.state.appCache.length){this.apps=this.$store.state.appCache,this.annotations={[this.activeGaia.address]:"User"};for(const e of this.apps)a.default.set(this.annotations,e.address,e.name)}else this.getApps();this.bigList.find(e=>e.startsWith(this.$route.path.slice(1)))&&(this.dir=this.$route.path.slice(1))}else this.$router.replace(""),this.refresh()},destroyed(){window.removeEventListener("mouseup",this.drawEnd),window.removeEventListener("mousemove",this.drawContinue)},methods:{handleError(e){console.error(e),this.$dialog.alert({title:"error",type:"error",message:"Error: "+e.message})},async listBucketFiles(e){const t={Authorization:"bearer "+e.token},i=[];let a;do{let s=e.server+"/list-files/"+e.address;a&&(s+="?page="+a);const n=await z.a.post(s,null,{headers:t});a=n.data.page?n.data.page:0,i.push(...n.data.entries)}while(a&&await new Promise(e=>setTimeout(()=>e(!0),500)));return i},async getApps(){const e=[];this.apps&&0!==this.apps.length||(this.apps=e),this.workingOn="Getting all available apps",this.annotations={[this.activeGaia.address]:"User"};const t=[];try{const e=(await z.a.get(this.activeGaia.url_prefix+this.activeGaia.address+"/profile.json")).data[0].decodedToken.payload.claim.apps;for(const i in e)e[i]&&t.push({name:i.replace(/https?:\/\//,""),website:i})}catch(e){console.warn("Issue getting profile: ",e)}const i=this.masterKeychain.getIdentityOwnerAddressNode(0).appsNode;let s;try{s=await z.a.get("https://api.app.co/api/apps")}catch(e){this.handleError(e),this.workingOn=""}const n=s.data.apps.filter(e=>!(0!==e.storageNetworkID&&"Gaia"!==e.storageNetwork||0!==e.authenticationID&&"Blockstack"!==e.authentication)).concat(te.apps.map(e=>({name:e.name+"*",website:e.launchLink}))).concat(t).concat(ae);for(const t of n){const s=i.getAppNode(t.website);this.annotations[s.getAddress()]||(a.default.set(this.annotations,s.getAddress(),t.name),e.push({name:t.name,website:t.website,address:s.getAddress(),privateKey:s.privateKey.toString("hex")}),this.apps=e,this.$store.commit("setAppCache",e),this.workingOn="")}},async listFiles(){this.progress=0,await this.getApps();const e=(await z.a.get(this.activeGaia.server+"/hub_info")).data,t=this.activeGaia.server,i=[];this.bigList&&0!==this.bigList.length||(this.bigList=i);for(let a=0,s=this.apps[a];a<this.apps.length;a++,s=this.apps[a])try{this.workingOn="Looking up "+s.name+"'s app bucket ("+a+"/"+this.apps.length+")";const n={url_prefix:e.read_url_prefix,address:s.address,token:X(e,s.privateKey,t),server:t},r=await this.listBucketFiles(n);r.length&&i.push(...r.map(e=>s.address+"/"+e)),this.progress+=1/(this.apps.length+1),await new Promise(e=>setTimeout(e,500))}catch(e){console.error("Error listing files for app "+s.name+"!"),console.error(e)}this.workingOn="Getting profile app bucket";const a=await this.listBucketFiles(this.activeGaia);i.push(...a.map(e=>this.activeGaia.address+"/"+e)),this.annotations[this.activeGaia.address]="User",this.workingOn="Finishing up",this.progress=1,this.bigList=i.sort(),this.workingOn=""},async populate(){const e=this.bigList.filter(e=>!this.dir||e.startsWith(this.dir+"/")).map(e=>this.dir?e.slice(this.dir.length+1):e);this.folders.splice(0),this.files.splice(0);for(const t of e)if(/\w\//.test(t)){const e=/^(\/*.+?)\//.exec(t)[1];this.folders.find(t=>t===e)||this.folders.push(e)}else this.files.push(t)},async refresh(){if(!this.working)return this.working=!0,this.$store.commit("setBigListCache",[]),this.$store.commit("setAppCache",[]),this.listFiles().then(()=>{this.working=!1,this.$store.commit("setBigListCache",this.bigList)}).catch(e=>{this.working=!1,this.handleError(e)})},goto(e){e<=0?this.dir="":e>=this.splitDir.length||(this.dir=this.splitDir.slice(1,e+1).join("/").replace(/\/$/,""))},onClick(e,t){if(e.getModifierState("Shift")||e.shiftKey){const i=this.folders.map(e=>"/"+e).concat(this.files),s=i.indexOf(this.lastActive),n=i.indexOf(t),r=i.slice(Math.min(s,n),Math.max(s,n)+1);if(e.getModifierState("Control")||e.ctrlKey)for(const e of r)a.default.set(this.active,e,!0);else this.active=r.reduce((e,t)=>(e[t]=!0,e),{});this.lastActiveTime=0}else e.getModifierState("Control")||e.ctrlKey?(this.active[t]=!this.active[t],this.lastActiveTime=0):(this.active={[t]:!0},Date.now()-this.lastActiveTime<333&&(t.startsWith("/")?this.openFolder(t.slice(1)):this.openFile(t)),this.lastActiveTime=Date.now()),this.lastActive=t},openFolder(e){this.dir?this.dir=(this.dir+"/"+e).replace(/(^\/)|(\/$)/,""):this.dir=e},async openFile(e,t=!0){const i=this.activeGaia.url_prefix+(this.dir?this.dir+"/":"")+e,a=this.dir.includes("/")?this.splitDir[1]:this.dir||e.split("/")[0];let s,n="";if(a===this.activeGaia.address)n=this.masterKeychain.getIdentityOwnerAddressNode(0).privateKey.toString("hex");else{const e=this.apps.find(e=>e.address===a);e&&(n=e.privateKey)}const r=await z.a.get(i);if(s=n&&Object.keys(r.data).map(e=>ie.includes(e)).reduce((e,t)=>e&&t)?(e.endsWith(".json")?"application/json,":",")+Object(J.decryptECIES)(n,r.data):"string"==typeof r.data?","+r.data:"application/json,"+JSON.stringify(r.data),!t)return new Blob([s.slice(s.indexOf(",")+1)],{type:s.slice(0,s.indexOf(","))});window.open("data:"+s)},async download(){if(this.working)return;this.working=!0,this.progress=0;const e=[];for(const t in this.active)!0===this.active[t]&&e.push(t.startsWith("/")?t.slice(1):t);let t=[];for(const i of e)t=t.concat(this.bigList.filter(e=>e.startsWith((this.dir?this.dir+"/":"")+i)).map(e=>this.dir.length?e.slice(this.dir.length+1):e));if(1===t.length)return ee.a.saveAs(await this.openFile(t[0],!1),e[0]),this.workingOn="",void(this.working=!1);const i=new Y.a;for(let e=0,a=t[e];e<t.length;a=t[++e])console.log("download:",a),this.progress=e/t.length,this.workingOn="Zipping "+a,await new Promise(e=>setTimeout(e,500)),i.file(a,await this.openFile(a,!1));this.progress=1,this.workingOn="Serving the Zip";const a=await i.generateAsync({type:"blob"}),s=1===e.length?this.annotations[e[0]]||e[0]:this.splitDir[this.splitDir.length-1];ee.a.saveAs(a,s.replace("*","")),this.workingOn="",this.working=!1},drawStart(e){0===e.button&&(this.drawing=!0,a.default.set(this.drawBegin,"x",e.x),a.default.set(this.drawBegin,"y",e.y),this.drawPoints={x1:e.x,x2:e.x,y1:e.y,y2:e.y},this.drawPos={top:e.y+"px",left:e.x+"px",height:"0px",width:"0px"})},boxInside:(e,t)=>!(e.x1>t.x2||e.x2<t.x1||e.y1>t.y2||e.y2<t.y1),drawContinue:U.a.throttle(function(e){if(!this.drawing)return;a.default.set(this.drawPoints,"y1",Math.min(e.y,this.drawBegin.y)),a.default.set(this.drawPoints,"x1",Math.min(e.x,this.drawBegin.x)),a.default.set(this.drawPoints,"y2",Math.max(e.y,this.drawBegin.y)),a.default.set(this.drawPoints,"x2",Math.max(e.x,this.drawBegin.x)),a.default.set(this.drawPos,"top",this.drawPoints.y1+"px"),a.default.set(this.drawPos,"left",this.drawPoints.x1+"px"),a.default.set(this.drawPos,"height",this.drawPoints.y2-this.drawPoints.y1+"px"),a.default.set(this.drawPos,"width",this.drawPoints.x2-this.drawPoints.x1+"px");const t=this.$refs.explorer.children;for(let e=0,i=t.item(e);e<t.length;e++,i=t.item(e)){if(!i.classList.contains("folder")&&!i.classList.contains("file"))continue;const e=i.getBoundingClientRect(),t={x1:e.left,y1:e.top,x2:e.right,y2:e.bottom};this.boxInside(t,this.drawPoints)?i.classList.add("hover"):i.classList.contains("hover")&&i.classList.remove("hover")}},15),drawEnd(e,t){if(!this.drawing||0!==e.button)return;this.drawing=!1;const i=this.$refs.explorer.children,s=[];for(let e=0,t=i.item(e);e<i.length;e++,t=i.item(e))if((t.classList.contains("folder")||t.classList.contains("file"))&&t.classList.contains("hover")){const e=/m-(.+)/.exec(t.id);e&&e[1]&&s.push(e[1]),t.classList.remove("hover")}e.getModifierState("State")||e.shiftKey||(this.active={});for(const e of s)a.default.set(this.active,e,!0)}}}),ne=(i(668),Object(l.a)(se,F,[],!1,null,null,null));ne.options.__file="src/components/home/home.vue";var re=ne.exports;a.default.use(q.a);const oe=new q.a({mode:"hash",routes:[{path:"**",component:re}]});oe.beforeEach((e,t,i)=>{if(e.path!==t.path)if(e.path.length>1){const t=[];let i="";e.path.slice(1).split("/").forEach(e=>{e?i?t.push(i+e):t.push(e):i+="/"}),document.title="Mercurius - "+t.join(" - ")}else document.title="Mercurius";i()});var ce=oe;console.log("Environment:","production"),a.default.use(s.a);const pe=new s.a.Store(T);a.default.use(n.a),a.default.use(o.a);const le=Date.now()-pe.state.storeBDay;console.log("Store age: "+(le/6e4).toFixed()+":"+(le%6e4/1e3).toFixed(3));const de=new a.default({store:pe,router:ce,el:"#app",data:{loaded:!1,done:!0,working:!1},computed:{...Object(s.b)({loggedIn:"isLoggedIn"})},components:{AppComponent:h,LoadingComponent:x},render(e){return this.loaded?this.loggedIn&&this.done?e(h,{key:"app"}):e("div",{key:"base"},[e("div",{staticStyle:{position:"absolute",zIndex:1024,top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(250,250,250,0.7)",alignItems:"center",justifyContent:"center"},style:{display:this.working?"flex":"none"}},[e(x)]),e("div",{staticStyle:{display:"flex",flexFlow:"column",flexWrap:"nowrap",alignItems:"center",justifyContent:"center",position:"fixed",top:"0",left:"0",height:"100%",width:"100%",backgroundColor:"#fafafa"}},[e("div",{staticStyle:{display:"flex",alignItems:"center",marginBottom:"1rem"}},[e("figure",{staticStyle:{height:"1.5em",width:"1.5em",marginRight:"0.4rem"}},[e("img",{domProps:{src:"assets/images/logo-48.png"}})]),e("h4",{staticClass:"title is-5",staticStyle:{lineHeight:1,flexGrow:1,margin:0}},"Mercurius")]),e(w,{key:"login",props:{done:this.done},on:{working:e=>this.working=Boolean(e),error:e=>{e&&this.$dialog.alert({title:"Error",message:String(e),type:"is-danger"})},showDialog:({type:e,options:t})=>{this.$dialog[e]&&this.$dialog[e](t)},"update:done":e=>this.done=e},staticStyle:{border:"1px solid rgba(0,0,0,0.2)",boxShadow:"0px 0px 5px 1px rgba(0,0,0,0.2)",minWidth:"300px",maxWidth:"480px"}})])]):function(e,t){return e("div",{staticStyle:{display:"flex",flexFlow:"column",flexWrap:"nowrap",alignItems:"center",justifyContent:"center",position:"fixed",top:"0",left:"0",height:"100%",width:"100%",backgroundColor:"#fafafa"}},[e(t)])}(e,x)}});console.log("Initialized Main!"),de.loaded=!0}});